{"ast":null,"code":"var _jsxFileName = \"/root/Desktop/Good-fordev/site-perso/src/package/components/cards/cards_types/skills/skills_back/skills_back.jsx\";\nimport React, { memo, useCallback, useMemo, useRef } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { createUseStyles } from 'react-jss';\nimport { config, useSpring, useChain } from 'react-spring';\nimport { ProfileCardTitle } from '../../../../commons/profile_card/profile_card_title/profile_card_title';\nimport SkillsPieChart from './skills_pie_chart/skills_pie_chart';\nimport OtherSkills from './other_skills/other_skills';\nimport { styles } from './skills_back_styles';\nimport { useCardVariant } from '../../../../hooks/profile_card_hooks/use_card_variant';\nimport { existsAndNotEmpty } from '../../../utils/exists_and_not_empty';\nimport { NoSkill } from './no_skill/no_skill';\nconst useStyles = createUseStyles(styles);\n\nconst SkillsBackComponent = ({\n  data,\n  handleAddButtonClick\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProfileCardTitle, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }\n}, /*#__PURE__*/React.createElement(FormattedMessage, {\n  id: \"Skills.back.title\",\n  defaultMessage: \"Skills\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 13\n  }\n})), /*#__PURE__*/React.createElement(Content, Object.assign({\n  data,\n  handleAddButtonClick\n}, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 9\n  }\n})));\n\nconst Content = ({\n  data,\n  handleAddButtonClick\n}) => {\n  const [variant] = useCardVariant();\n  const classes = useStyles({\n    variant\n  });\n  const springSkillOpacityPropsRef = useRef();\n  const springGraphOpacityPropsRef = useRef();\n  const hasSkill = useMemo(() => existsAndNotEmpty(data === null || data === void 0 ? void 0 : data.skills), [data]);\n  const springSkillOpacityProps = useSpring({\n    from: {\n      opacity: 0\n    },\n    to: {\n      opacity: 1\n    },\n    ref: springSkillOpacityPropsRef\n  });\n  const springGraphOpacityProps = useSpring({\n    from: {\n      opacity: 0\n    },\n    to: {\n      opacity: 1\n    },\n    ref: springGraphOpacityPropsRef\n  });\n  useChain([springGraphOpacityPropsRef, springSkillOpacityPropsRef], [0, 0.1]);\n  const [springOnScrollOpacityProps, setSpringOnScrollOpacityProps] = useSpring(() => ({\n    opacity: 1\n  }));\n  const [springTranslationProps, setSpringTranslationProps] = useSpring(() => ({\n    yt: 0,\n    config: config.slow\n  }));\n  const {\n    top3Skills,\n    othersSkills\n  } = useMemo(() => {\n    var _data$skills;\n\n    const newData = [...((_data$skills = data.skills) !== null && _data$skills !== void 0 ? _data$skills : [])];\n    const top3 = newData.splice(0, 3);\n    return {\n      top3Skills: top3,\n      othersSkills: newData\n    };\n  }, [data]);\n  const onScroll = useCallback(e => {\n    const newOpacity = Math.max(1 - e.target.scrollTop / 60, 0);\n\n    if (newOpacity === 0) {\n      if (othersSkills.length > 10) {\n        setSpringTranslationProps({\n          yt: -100\n        });\n      } else {\n        setSpringTranslationProps({\n          yt: -100 + (e.target.scrollTop > 160 && e.target.scrollTop - 160)\n        });\n      }\n    } else {\n      setSpringTranslationProps({\n        yt: 0\n      });\n    }\n\n    return setSpringOnScrollOpacityProps({\n      opacity: newOpacity\n    });\n  }, [othersSkills]);\n\n  if (!hasSkill) {\n    return /*#__PURE__*/React.createElement(NoSkill, Object.assign({\n      handleAddButtonClick\n    }, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 16\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    onScroll: onScroll,\n    style: springGraphOpacityProps,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SkillsPieChart, {\n    variant: variant,\n    data: top3Skills,\n    springOnScrollOpacityProps: springOnScrollOpacityProps,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }), othersSkills.length > 1 && /*#__PURE__*/React.createElement(OtherSkills, {\n    style: springSkillOpacityProps,\n    othersSkills: othersSkills,\n    springTranslationProps: springTranslationProps,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }));\n};\n\nexport const SkillsBack = memo(SkillsBackComponent);","map":{"version":3,"sources":["/root/Desktop/Good-fordev/site-perso/src/package/components/cards/cards_types/skills/skills_back/skills_back.jsx"],"names":["React","memo","useCallback","useMemo","useRef","FormattedMessage","createUseStyles","config","useSpring","useChain","ProfileCardTitle","SkillsPieChart","OtherSkills","styles","useCardVariant","existsAndNotEmpty","NoSkill","useStyles","SkillsBackComponent","data","handleAddButtonClick","Content","variant","classes","springSkillOpacityPropsRef","springGraphOpacityPropsRef","hasSkill","skills","springSkillOpacityProps","from","opacity","to","ref","springGraphOpacityProps","springOnScrollOpacityProps","setSpringOnScrollOpacityProps","springTranslationProps","setSpringTranslationProps","yt","slow","top3Skills","othersSkills","newData","top3","splice","onScroll","e","newOpacity","Math","max","target","scrollTop","length","container","SkillsBack"],"mappings":"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","sourcesContent":["import React, { memo, useCallback, useMemo, useRef } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\nimport { createUseStyles } from 'react-jss';\nimport { config, useSpring, useChain } from 'react-spring';\n\nimport { ProfileCardTitle } from '../../../../commons/profile_card/profile_card_title/profile_card_title';\n\nimport SkillsPieChart from './skills_pie_chart/skills_pie_chart';\nimport OtherSkills from './other_skills/other_skills';\n\nimport { styles } from './skills_back_styles';\nimport { useCardVariant } from '../../../../hooks/profile_card_hooks/use_card_variant';\nimport { existsAndNotEmpty } from '../../../utils/exists_and_not_empty';\nimport { NoSkill } from './no_skill/no_skill';\n\nconst useStyles = createUseStyles(styles);\n\nconst SkillsBackComponent = ({ data, handleAddButtonClick }) => (\n    <>\n        <ProfileCardTitle>\n            <FormattedMessage id=\"Skills.back.title\" defaultMessage=\"Skills\" />\n        </ProfileCardTitle>\n        <Content {...{ data, handleAddButtonClick }} />\n    </>\n);\n\nconst Content = ({ data, handleAddButtonClick }) => {\n    const [variant] = useCardVariant();\n\n    const classes = useStyles({ variant });\n    const springSkillOpacityPropsRef = useRef();\n    const springGraphOpacityPropsRef = useRef();\n\n    const hasSkill = useMemo(() => existsAndNotEmpty(data?.skills), [data]);\n\n    const springSkillOpacityProps = useSpring({\n        from: { opacity: 0 },\n        to: { opacity: 1 },\n        ref: springSkillOpacityPropsRef\n    });\n    const springGraphOpacityProps = useSpring({\n        from: { opacity: 0 },\n        to: { opacity: 1 },\n        ref: springGraphOpacityPropsRef\n    });\n\n    useChain([springGraphOpacityPropsRef, springSkillOpacityPropsRef], [0, 0.1]);\n\n    const [springOnScrollOpacityProps, setSpringOnScrollOpacityProps] = useSpring(() => ({\n        opacity: 1\n    }));\n    const [springTranslationProps, setSpringTranslationProps] = useSpring(() => ({ yt: 0, config: config.slow }));\n\n    const { top3Skills, othersSkills } = useMemo(() => {\n        const newData = [...(data.skills ?? [])];\n        const top3 = newData.splice(0, 3);\n        return {\n            top3Skills: top3,\n            othersSkills: newData\n        };\n    }, [data]);\n\n    const onScroll = useCallback(\n        e => {\n            const newOpacity = Math.max(1 - e.target.scrollTop / 60, 0);\n\n            if (newOpacity === 0) {\n                if (othersSkills.length > 10) {\n                    setSpringTranslationProps({ yt: -100 });\n                } else {\n                    setSpringTranslationProps({ yt: -100 + (e.target.scrollTop > 160 && e.target.scrollTop - 160) });\n                }\n            } else {\n                setSpringTranslationProps({ yt: 0 });\n            }\n\n            return setSpringOnScrollOpacityProps({ opacity: newOpacity });\n        },\n        [othersSkills]\n    );\n\n    if (!hasSkill) {\n        return <NoSkill {...{ handleAddButtonClick }} />;\n    }\n\n    return (\n        <div className={classes.container} onScroll={onScroll} style={springGraphOpacityProps}>\n            <SkillsPieChart\n                variant={variant}\n                data={top3Skills}\n                springOnScrollOpacityProps={springOnScrollOpacityProps}\n            />\n            {othersSkills.length > 1 && (\n                <OtherSkills\n                    style={springSkillOpacityProps}\n                    othersSkills={othersSkills}\n                    springTranslationProps={springTranslationProps}\n                />\n            )}\n        </div>\n    );\n};\nexport const SkillsBack = memo(SkillsBackComponent);\n"]},"metadata":{},"sourceType":"module"}
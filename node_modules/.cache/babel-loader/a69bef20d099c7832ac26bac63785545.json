{"ast":null,"code":"var _jsxFileName = \"/root/Desktop/Good-fordev/site-perso/src/App.jsx\";\nimport React, { useCallback, useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { createUseStyles } from 'react-jss';\nimport isArray from 'lodash/isArray';\nimport mergeWith from 'lodash/mergeWith';\nimport cloneDeep from 'lodash/cloneDeep';\nimport download from 'downloadjs';\nimport { Button } from '@wld/ui';\nimport JsonStub from './data/json_stub.json';\nimport DeveloperProfile from './package';\nimport { ReactComponent as SaveIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!./package/assets/icons/drop_file.svg\";\nimport { styles } from './app_styles';\nconst useStyles = createUseStyles(styles);\n\nconst mergeFunction = (objValue, srcValue, key) => {\n  console.log({\n    objValue,\n    srcValue,\n    key\n  });\n\n  if (!objValue || isArray(objValue)) {\n    return srcValue;\n  }\n\n  return undefined;\n};\n\nconst mode = 'edit';\n\nfunction App() {\n  const classes = useStyles();\n  const [data, setData] = useState(JsonStub);\n  const onEdit = useCallback(newData => setData(mergeWith(cloneDeep(data), newData, mergeFunction)), [JSON.stringify(data)]);\n  const [customization, setCustomization] = useState(data.resumeCustomization || {});\n  const onCustomizationChanged = useCallback(setCustomization, [data]);\n  const handleClick = useCallback(async () => {\n    var _data$basics;\n\n    // eslint-disable-next-line no-undef\n    const blob = new Blob([JSON.stringify({ ...data,\n      resumeCustomization: customization\n    })], {\n      type: 'text/plain; charset=utf-8'\n    });\n    download(blob, `${`Resume-${(data === null || data === void 0 ? void 0 : (_data$basics = data.basics) === null || _data$basics === void 0 ? void 0 : _data$basics.name) || 'Developer'}`.replace(' ', '-')}.json`, 'text/plain; charset=utf-8');\n  }, [JSON.stringify(data), JSON.stringify(customization)]);\n  return /*#__PURE__*/React.createElement(DeveloperProfile, {\n    mode: mode,\n    data: data,\n    onEdit: onEdit,\n    onCustomizationChanged: onCustomizationChanged,\n    options: {\n      // side: 'back',\n      apiKeys: {\n        giphy: process.env.REACT_APP_GIPHY\n      },\n      endpoints: {\n        devicons: 'https://firebasestorage.googleapis.com/v0/b/jechercheundev.appspot.com/o/technologies%2Ftechnologies_list.json?alt=media&token=459028ba-d9bc-4480-a3c4-88633afab7e2'\n      },\n      customization\n    },\n    additionalNodes: {\n      banner: {\n        actionsButtons: mode === 'edit' && /*#__PURE__*/React.createElement(Button, {\n          variant: \"outlined\",\n          onClick: handleClick,\n          color: 'light',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(SaveIcon, {\n          className: classes.saveIcon,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 29\n          }\n        }), /*#__PURE__*/React.createElement(FormattedMessage, {\n          id: \"Profile.header.jsonResume.download\",\n          defaultMessage: \"Export\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }\n        }))\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  });\n}\n\nexport default App;","map":{"version":3,"sources":["/root/Desktop/Good-fordev/site-perso/src/App.jsx"],"names":["React","useCallback","useState","FormattedMessage","createUseStyles","isArray","mergeWith","cloneDeep","download","Button","JsonStub","DeveloperProfile","styles","useStyles","mergeFunction","objValue","srcValue","key","console","log","undefined","mode","App","classes","data","setData","onEdit","newData","JSON","stringify","customization","setCustomization","resumeCustomization","onCustomizationChanged","handleClick","blob","Blob","type","basics","name","replace","apiKeys","giphy","process","env","REACT_APP_GIPHY","endpoints","devicons","banner","actionsButtons","saveIcon"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { createUseStyles } from 'react-jss';\nimport isArray from 'lodash/isArray';\nimport mergeWith from 'lodash/mergeWith';\nimport cloneDeep from 'lodash/cloneDeep';\nimport download from 'downloadjs';\nimport { Button } from '@wld/ui';\n\nimport JsonStub from './data/json_stub.json';\nimport DeveloperProfile from './package';\nimport { ReactComponent as SaveIcon } from './package/assets/icons/drop_file.svg';\n\nimport { styles } from './app_styles';\n\nconst useStyles = createUseStyles(styles);\nconst mergeFunction = (objValue, srcValue, key) => {\n    console.log({ objValue, srcValue, key });\n    if (!objValue || isArray(objValue)) {\n        return srcValue;\n    }\n    return undefined;\n};\n\nconst mode = 'edit';\nfunction App() {\n    const classes = useStyles();\n    const [data, setData] = useState(JsonStub);\n\n    const onEdit = useCallback(newData => setData(mergeWith(cloneDeep(data), newData, mergeFunction)), [\n        JSON.stringify(data)\n    ]);\n    const [customization, setCustomization] = useState(data.resumeCustomization || {});\n\n    const onCustomizationChanged = useCallback(setCustomization, [data]);\n\n    const handleClick = useCallback(async () => {\n        // eslint-disable-next-line no-undef\n        const blob = new Blob([JSON.stringify({ ...data, resumeCustomization: customization })], {\n            type: 'text/plain; charset=utf-8'\n        });\n        download(\n            blob,\n            `${`Resume-${data?.basics?.name || 'Developer'}`.replace(' ', '-')}.json`,\n            'text/plain; charset=utf-8'\n        );\n    }, [JSON.stringify(data), JSON.stringify(customization)]);\n\n    return (\n        <DeveloperProfile\n            mode={mode}\n            data={data}\n            onEdit={onEdit}\n            onCustomizationChanged={onCustomizationChanged}\n            options={{\n                // side: 'back',\n                apiKeys: {\n                    giphy: process.env.REACT_APP_GIPHY\n                },\n                endpoints: {\n                    devicons:\n                        'https://firebasestorage.googleapis.com/v0/b/jechercheundev.appspot.com/o/technologies%2Ftechnologies_list.json?alt=media&token=459028ba-d9bc-4480-a3c4-88633afab7e2'\n                },\n                customization\n            }}\n            additionalNodes={{\n                banner: {\n                    actionsButtons: mode === 'edit' && (\n                        <Button variant=\"outlined\" onClick={handleClick} color={'light'}>\n                            <SaveIcon className={classes.saveIcon} />\n                            <FormattedMessage id=\"Profile.header.jsonResume.download\" defaultMessage=\"Export\" />\n                        </Button>\n                    )\n                }\n            }}\n        />\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}